Вот **общие, универсальные сетапы** (сценарии входа) для краткосрочной торговли криптой (включая LTC/USDC или LTC/USDT на 1–15 мин таймфреймах), которые ты можешь самостоятельно применять на любом чарте. Они построены вокруг твоих индикаторов (**VWAP AA**, **EMA 9/21**, **RSI 9–14**, **ATR**), плюс простые дополнения вроде volume и price action.

Эти сетапы не "волшебные", но проверенные комбинации (VWAP + EMA + RSI + ATR + volume) — самые часто используемые в 2025–2026 для скальпинга крипты. Главное — **контекст тренда** + **подтверждение** + **риск-менеджмент**.

### Базовые правила для всех сетапов (обязательно!)
- **Тренд-байас** по VWAP и EMA:  
  - Выше VWAP + EMA 9 > EMA 21 → **только лонги** (или очень осторожные шорты на истощении).  
  - Ниже VWAP + EMA 9 < EMA 21 → **только шорты** (или осторожные лонги на истощении).  
- **RSI фильтр**:  
  - Лонг: RSI > 50–55 (лучше >60 на импульсе, избегай <40).  
  - Шорт: RSI < 45–50 (лучше <40 на импульсе, избегай >60).  
- **Volume**: всплеск (зелёный бар > средний) на входе — обязательно для подтверждения.  
- **ATR для SL/TP**:  
  - SL = 1.5–3 ATR (чаще 2 ATR, чтобы не вылетать на шуме).  
  - TP = 2–5 ATR (минимум R:R 1:2, идеал 1:3+).  
  - Частичный выход: 50% на 1:2, остаток trailing.  
- **Price Action**: ищи подтверждающие свечи (pin-bar, engulfing, hammer/shooting star).  
- **Избегай**: флет (цена между EMA/VWAP без движения), низкий volume, экстремальный RSI (>80/<20 без дивергенции).

### Сетап 1: Pullback / Отскок от поддержки (самый надёжный, 60–75% win-rate в тренде)
**Тип**: тренд-континуация (продолжение).  
**Лучше всего работает**: в сильном тренде (цена далеко от VWAP, но возвращается).

**Условия для ЛОНГ**:
- Общий bias: цена выше VWAP + EMA 9 > EMA 21.
- Цена откатывается к зоне поддержки: VWAP / EMA 21 / нижняя band VWAP (1 SD).
- Подтверждение: бычья свеча (отскок) + volume всплеск + RSI отскакивает от 45–55 (не ниже 40).
- Нет сильной bearish дивергенции на RSI.

**Вход**: на закрытии подтверждающей свечи или лимит-ордер на уровне поддержки.
**SL**: ниже зоны поддержки – 1–1.5 ATR (часто под нижней band VWAP или EMA 21 – буфер).
**TP**:
- Базовый: предыдущий high / верхняя band VWAP (1–2 SD) → R:R 1:2–1:3.
- Расширенный: 3–5 ATR или trailing по EMA 9.
- Части: 50% на 1:2, остаток trailing.

**Аналог для ШОРТ**: зеркально (откат к VWAP/EMA 9 сверху как сопротивление).

### Сетап 2: Breakout / Пробой уровня (импульсный, агрессивный)
**Тип**: тренд-ускорение или начало нового движения.

**Условия для ЛОНГ**:
- Bias: выше VWAP, EMA бычьи.
- Цена консолидируется у сопротивления: верхняя band VWAP (1–2 SD) / предыдущий high / круглый уровень.
- Пробой: сильная импульсная свеча вверх + volume surge (большой зелёный бар).
- RSI > 60–70 (импульс живой, но не >80 без объёма).
- Ретест (лучше): цена возвращается к пробитому уровню и отскакивает.

**Вход**: на пробое (market) или на ретесте (лимит).
**SL**: ниже пробитого уровня – 1–2 ATR (или под EMA 9).
**TP**:
- TP1: 2–3 ATR или следующая зона (верх 2 SD VWAP / следующий high).
- TP2: 4–6 ATR или trailing по ATR (SL = цена – 2 ATR).
- R:R минимум 1:2.5+ (пробои часто дают хорошие движения).

**Шорт**: зеркально (пробой вниз VWAP/нижней band).

### Сетап 3: Mean Reversion / Возврат к VWAP (контртренд в диапазоне)
**Тип**: возврат к средней (когда цена сильно отклонилась).

**Условия для ЛОНГ** (цена сильно ниже VWAP):
- Цена у нижней band VWAP (2 SD или экстрим) или ниже.
- RSI oversold (<30–35) + bullish divergence (цена lower low, RSI higher low).
- Свеча разворота (hammer/pin-bar) + volume.
- EMA начинают загибаться вверх.

**Вход**: на развороте + подтверждение.
**SL**: ниже low свечи или 2–3 ATR ниже.
**TP**: возврат к VWAP (основная цель) → R:R 1:2–1:4 (отклонения часто дают быстрый возврат).
- Части: 70% на VWAP, остаток если пробьёт дальше.

**Шорт**: цена сильно выше VWAP + RSI overbought (>65–70) + bearish divergence.

### Сетап 4: Divergence / Истощение (контртренд на экстремумах)
**Тип**: разворот (самый рискованный, используй редко без сильного подтверждения).

**Условия для ШОРТ** (на топе):
- Цена делает higher high, но RSI lower high (bearish divergence).
- RSI >70–75 + цена у верхней band VWAP / FBMA.
- Свеча разворота (shooting star, bearish engulfing) + падающий volume.
- Bias: цена у сопротивления, EMA flattening.

**Вход**: на закрытии дивергентной свечи.
**SL**: выше high (1–1.5 ATR буфер).
**TP**: VWAP / EMA 21 / нижняя band → R:R 1:2+.

**Лонг**: зеркально (bullish divergence на боттоме).

### Как самостоятельно анализировать и выбирать сетап
1. Определи bias (30 сек): VWAP положение + EMA cross + RSI >/<50.
2. Жди pullback/breakout/отклонения (основные 3 типа движения).
3. Ищи подтверждение: volume + свеча + RSI (дивергенция/уровень).
4. Рассчитай SL/TP по ATR и уровням (VWAP bands, EMA, предыдущие high/low).
5. R:R ≥ 1:2 → входи, иначе пропусти.
6. Журнал: записывай, почему вошёл/вышел — через 50–100 сделок увидишь, какой сетап лучше работает именно на LTC.

Если добавишь SuperTrend (10,3) — станет ещё проще: зелёный = только лонги по сетапам 1–2, красный = шорты или вне рынка.

Да, это абсолютно реально и является отличным способом исключить эмоции из торговли. Hyperliquid — это современная DEX с отличным API, которая хорошо подходит для таких задач.

Ниже я разберу структуру Python-скрипта, который будет:
1. Подключаться к Hyperliquid через WebSocket/REST.
2. Рассчитывать **VWAP, EMA 9, EMA 21 и RSI 9**.
3. Проверять условия входа в реальном времени.
4. Выдавать сигнал (или открывать сделку).

### Что вам понадобится:
* **Python 3.9+**
* Библиотеки: `pandas`, `pandas_ta` (для индикаторов), `hyperliquid-python-sdk`.

---

### Схема логики скрипта

#### 1. Установка зависимостей
```bash
pip install pandas pandas_ta hyperliquid-python-sdk
```

#### 2. Пример кода на Python (Логика сигналов)

Этот скрипт получает свечи, считает индикаторы и проверяет пересечения.

```python
import time
import pandas as pd
import pandas_ta as ta
from hyperliquid.info import Info
from hyperliquid.utils import constants

# Настройки стратегии
SYMBOL = "ETH"
TIMEFRAME = "5m"  # Таймфрейм 5 минут
RSI_PERIOD = 9
RSI_LOWER = 25
RSI_UPPER = 75

info = Info(constants.MAINNET_API_URL, skip_manager=True)

def get_data(symbol):
    # Получаем последние 200 свечей
    # Hyperliquid API возвращает данные в миллисекундах
    now = int(time.time() * 1000)
    candles = info.candle_snapshot(symbol, TIMEFRAME, now - 200 * 5 * 60 * 1000, now)
    
    df = pd.DataFrame(candles)
    # Преобразуем типы данных
    df['c'] = df['c'].astype(float) # Close
    df['h'] = df['h'].astype(float) # High
    df['l'] = df['l'].astype(float) # Low
    df['v'] = df['v'].astype(float) # Volume
    df['t'] = pd.to_datetime(df['t'], unit='ms')
    return df

def calculate_indicators(df):
    # 1. EMA 9 и 21
    df['ema9'] = ta.ema(df['c'], length=9)
    df['ema21'] = ta.ema(df['c'], length=21)
    
    # 2. RSI 9
    df['rsi'] = ta.rsi(df['c'], length=RSI_PERIOD)
    
    # 3. VWAP (Упрощенный расчет: сумма (Цена * Объем) / сумма Объема за сессию)
    # В крипте сессия обычно начинается в 00:00 UTC
    df['pv'] = df['c'] * df['v']
    df['vwap'] = df['pv'].cumsum() / df['v'].cumsum() 
    # Примечание: для точного VWAP нужно сбрасывать сумму в начале суток
    
    return df

def check_signals(df):
    last = df.iloc[-1]      # Текущая свеча (еще не закрыта)
    prev = df.iloc[-2]      # Последняя закрытая свеча
    prev2 = df.iloc[-3]     # Предпоследняя закрытая свеча
    
    price = last['c']
    
    # Условия для LONG
    # 1. Цена выше VWAP
    # 2. Пересечение EMA: EMA9 была ниже EMA21, стала выше
    # 3. RSI между 25 и 75
    long_condition = (
        price > last['vwap'] and 
        prev2['ema9'] <= prev2['ema21'] and 
        prev['ema9'] > prev['ema21'] and 
        RSI_LOWER < last['rsi'] < RSI_UPPER
    )
    
    # Условия для SHORT
    short_condition = (
        price < last['vwap'] and 
        prev2['ema9'] >= prev2['ema21'] and 
        prev['ema9'] < prev['ema21'] and 
        RSI_LOWER < last['rsi'] < RSI_UPPER
    )
    
    if long_condition:
        return "LONG"
    elif short_condition:
        return "SHORT"
    return None

def main():
    print(f"Запуск стратегии для {SYMBOL}...")
    while True:
        try:
            df = get_data(SYMBOL)
            df = calculate_indicators(df)
            signal = check_signals(df)
            
            last_price = df.iloc[-1]['c']
            
            if signal:
                # Расчет Стоп-лосса и Тейка
                if signal == "LONG":
                    sl = min(df.iloc[-1]['vwap'], df.iloc[-1]['ema21']) # Стоп за VWAP или EMA
                    tp = last_price + (last_price - sl) * 2 # Тейк 1:2
                else:
                    sl = max(df.iloc[-1]['vwap'], df.iloc[-1]['ema21'])
                    tp = last_price - (sl - last_price) * 2
                
                print(f"*** СИГНАЛ {signal} ***")
                print(f"Вход: {last_price} | SL: {sl:.2f} | TP: {tp:.2f}")
                # Здесь можно добавить вызов функции exchange.market_open(...)
                
            time.sleep(30) # Проверка каждые 30 секунд
        except Exception as e:
            print(f"Ошибка: {e}")
            time.sleep(10)

if __name__ == "__main__":
    main()
```

---

### Нюансы реализации через API

1.  **Расчет VWAP:** 
    В TradingView индикатор VWAP часто сбрасывается ежедневно. В моем примере выше используется простая кумулятивная сумма. Для более точного соответствия TV нужно группировать данные по дням:
    ```python
    df['date'] = df['t'].dt.date
    df['vwap'] = df.groupby('date').apply(lambda x: (x['c'] * x['v']).cumsum() / x['v'].cumsum()).reset_index(drop=True)
    ```

2.  **WebSocket vs REST:**
    *   Приведенный код использует **REST API** (`candle_snapshot`), это проще для начала. Скрипт просто «опрашивает» биржу раз в 30 секунд.
    *   Если нужен **WebSocket**, вы подписываетесь на канал `l2Book` или `trades`, собираете свечи в памяти и обновляете индикаторы с каждым новым тиком. Это быстрее, но код будет сложнее (нужен `asyncio`).

3.  **Стоп-лосс и Тейк-профит:**
    *   Hyperliquid позволяет выставлять **TP/SL** сразу при открытии позиции (параметры `cloid`).
    *   В коде я добавил простую математику: если стоп ставим за VWAP, то тейк считаем как `Риск * 2`.

4.  **Слиппидж (Slippage):**
    При торговле через API на Hyperliquid обязательно указывайте `slippage`, так как это DEX, и цена может измениться за доли секунды, пока летит ваш ордер.

### Что делать дальше?
Если вы хотите сделать полноценного бота:
1. Добавьте уведомления в **Telegram**, чтобы бот писал вам: "Захожу в Лонг по цене X".
2. Используйте библиотеку `ccxt` (если привыкли к ней) или официальный SDK Hyperliquid для исполнения ордеров.
3. Протестируйте логику на **Testnet** Hyperliquid (у них отличная тестовая сеть).

